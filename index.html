<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <title>FloorballSzab√°lyok</title>
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />

  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet" />

  <!-- Phosphor ikonok -->
  <script src="https://unpkg.com/@phosphor-icons/web"></script>

  <!-- Saj√°t CSS -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Umami snippet IDE mehet, ha m√©g nincs ‚Äì ezt m√°r te raktad be kor√°bban -->
  <!-- Umami analytics -->
<script
  async
  src="https://analytics.umami.is/script.js"
  data-website-id="c1fb486e-d928-445e-986d-fa44cc181fae"
></script>

  <!-- Firebase 8 (app + database) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

  <!-- Adatb√°zis (k√©rd√©sek) -->
 

  <!-- Oklev√©lhez -->
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js" defer></script>

  <!-- Alkalmaz√°s logika -->
  <script src="app.js" defer></script>
</head>
<body>
  <div class="app-container">
    <!-- HEADER / DASHBOARD -->
    <header class="dashboard-header">
      <div class="dashboard-nav">
        <button class="icon-btn" onclick="app.menu()" aria-label="F≈ëoldal">
          <i class="ph ph-house"></i>
        </button>

        <span class="app-title" onclick="app.menu()">
          FloorballSzab√°lyok
        </span>

        <div class="header-actions">
          <button id="install-btn"
                  class="icon-btn"
                  style="display:none"
                  onclick="app.triggerInstall()"
                  aria-label="App telep√≠t√©se">
            <i class="ph ph-arrow-fat-line-down"></i>
          </button>

          <button class="icon-btn" onclick="app.toggleTheme()" aria-label="T√©ma v√°lt√°sa">
            <i id="theme-icon" class="ph ph-moon"></i>
          </button>

          <button class="icon-btn" onclick="app.showRules()" aria-label="Szab√°lyk√∂nyv">
            <i class="ph ph-book-open-text"></i>
          </button>

          <button class="icon-btn" onclick="app.toggleInfo()" aria-label="Inform√°ci√≥k">
            <i class="ph ph-info"></i>
          </button>

          <button class="icon-btn" onclick="app.toggleResetModal()" aria-label="Adatok t√∂rl√©se">
            <i class="ph ph-trash"></i>
          </button>
        </div>
      </div>

      <div class="dashboard-stats-container">
        <div class="stat-pill">
          <div class="stat-label">V√°laszok</div>
          <div class="stat-data">
            <span id="stat-answered">0</span>
            <span class="stat-sep">/</span>
            <span id="stat-total">0</span>
          </div>
        </div>

        <div class="stat-pill">
          <div class="stat-label">Streak</div>
          <div class="stat-data">
            <span id="stat-streak">0</span>
            <span>üî•</span>
          </div>
        </div>
      </div>

      <div class="dashboard-cta">
        <button class="btn-main btn-main--accent btn-main--compact"
                onclick="app.startChallengeMode()">
          ‚öîÔ∏è P√ÅRBAJ KIH√çV√ÅS (B√âTA)
        </button>
      </div>
    </header>

    <!-- TARTALOM -->
    <main class="content">
      <!-- F≈êMEN√ú / T√âMA LISTA -->
      <section id="s-menu" class="screen active">
        <div class="section-header section-progress">
          <h2>T√©mak√∂r√∂k</h2>
          <span class="section-total-badge" id="total-badge">0%</span>
        </div>

        <div class="progress-track">
          <div id="total-progress-fill" class="progress-fill"></div>
        </div>

        <div id="master-info" class="master-badge">
          <span class="master-icon">üèÜ</span>
          <span class="master-text">
            <strong>Gratul√°lok!</strong> Minden t√©mak√∂rt v√©gigvitt√©l ‚Äì
            megszerezted a Floorball Mester c√≠met.
          </span>
        </div>

        <div id="topic-container" class="topic-list"></div>
      </section>

      <!-- SZINTV√ÅLASZT√ì -->
      <section id="s-levels" class="screen">
        <h2>T√©mak√∂r</h2>
        <div id="lvl-title" class="level-title">1) Alapfogalmak</div>
        <p class="level-subtitle">
          V√°laszd ki, melyik szinten szeretn√©l gyakorolni!
        </p>

        <div id="level-container"></div>

        <button class="btn-main btn-main--secondary" onclick="app.menu()">
          Vissza
        </button>
      </section>

      <!-- J√ÅT√âK -->
      <section id="s-game" class="screen">
        <div class="game-header">
          <div id="multi-badge" class="game-subtitle" style="display:none;">
            ‚öîÔ∏è P√°rbaj m√≥d (B√âTA)
          </div>

          <div id="round-indicator" class="game-subtitle" style="display:none;"></div>

          <div id="q-label" class="game-subtitle">
            H√°tral√©v≈ë k√©rd√©sek:
            <span class="game-subtitle-number" id="q-remaining">0</span>
          </div>

          <div id="g-lives" class="lives"></div>

          <div id="timer-bar" class="timer-track" style="display:none;">
            <div id="timer-fill" class="timer-fill"></div>
          </div>

          <div class="game-progress">
            <div class="progress-track">
              <div id="g-prog" class="progress-fill"></div>
            </div>
          </div>
        </div>

        <div class="q-box">
          <div id="q-text">K√©rd√©s sz√∂vege</div>
        </div>

        <div id="g-opts"></div>

        <div id="g-feed" class="feedback"></div>

        <div class="bottom-spacer"></div>
      </section>

      <!-- END SCREEN ‚Äì SINGLE + MULTI -->
      <section id="s-end" class="screen screen-end">
        <div id="end-icon" class="end-icon">üéâ</div>
        <h2 id="end-title" class="end-title">K√∂r v√©ge</h2>
        <p id="end-msg" class="end-msg">Sz√©p munka! Csak √≠gy tov√°bb!</p>

        <div class="end-card" id="end-card">
          <div class="end-card-label">Eredm√©ny</div>
          <div class="end-score" id="end-score">0 / 0</div>
        </div>

        <div class="end-actions" id="end-actions"></div>
      </section>

      <!-- MESTER OKLEV√âL -->
      <section id="s-master" class="screen screen-master">
        <div id="certificate" class="certificate-box">
          <div class="certificate-icon">üèÜ</div>
          <div class="certificate-title">Floorball Mester</div>
          <div class="certificate-text">
            Gratul√°lok! V√©gigvitted az √∂sszes t√©mak√∂rt √©s szintet.
            Ezt a k√©perny≈ët lementheted oklev√©lk√©nt.
          </div>
          <div class="certificate-badge">FLOORBALL MESTER</div>
        </div>

        <button class="btn-main" onclick="app.downloadCert()">
          Oklev√©l let√∂lt√©se
        </button>
        <button class="btn-main btn-main--secondary" onclick="app.menu()">
          Vissza a f≈ëmen√ºbe
        </button>
      </section>

      <!-- SZAB√ÅLYK√ñNYV N√âZET (MOBILRA) -->
      <section id="s-rules" class="screen screen-rules">
        <div class="rules-header">
          <h2>Szab√°lyk√∂nyv</h2>
        </div>

        <div class="pdf-mobile-view">
          <div class="pdf-deco-icon">üìÑ</div>
          <div class="pdf-title-mobile">
            Floorball J√°t√©kszab√°lyok 2022 (PDF)
          </div>
          <a href="Floorball_Jatekszabalyok_2022_FINAL.pdf"
             target="_blank"
             class="btn-pdf">
            Megnyit√°s √∫j lapon
          </a>
        </div>

        <iframe
          class="pdf-desktop-view"
          src="Floorball_Jatekszabalyok_2022_FINAL.pdf#view=FitH"
          title="Floorball szab√°lyk√∂nyv PDF">
        </iframe>
      </section>
    </main>

    <!-- WELCOME MODAL -->
    <div id="welcome-modal" class="modal-overlay">
      <div class="modal-box modal-box-center">
        <div class="modal-header">
          <h2 class="modal-title">√úDV A P√ÅLY√ÅN! üëã</h2>
          <button class="icon-btn modal-close" onclick="app.toggleWelcome()">‚úï</button>
        </div>

        <div class="welcome-box welcome-box-highlight">
          <span class="welcome-emoji">ü§îü•Ö</span>
          <p class="welcome-text">
            Folyamatosan ki√°ll√≠tanak? Vakarod a fejed egy b√≠r√≥i d√∂nt√©sn√©l?<br />
            <strong>Ideje gyakorolni!</strong>
          </p>
        </div>

        <div class="welcome-box">
          <span class="welcome-emoji">üßë‚Äç‚öñÔ∏èüì£</span>
          <p class="welcome-text">
            B√≠r√≥ vagy? V√°laszolj meg minden k√©rd√©st, legy√©l pro √©s
            <strong>a sz√ºleid nem fognak annyit csuklani</strong> egy-egy meccs
            alatt.
          </p>
        </div>

        <button class="btn-main" onclick="app.toggleWelcome()">GYER√úNK!</button>
      </div>
    </div>

    <!-- INFO MODAL -->
    <div id="info-modal" class="modal-overlay">
      <div class="modal-box">
        <div class="modal-header">
          <h2 class="modal-title">Inform√°ci√≥k</h2>
          <button class="icon-btn modal-close" onclick="app.toggleInfo()">‚úï</button>
        </div>

        <!-- FIGYELEM -->
        <div class="alert-box warning">
          <h3>‚ö†Ô∏è FIGYELEM!</h3>
          <p>
            Ez egy <strong>hobbi projekt</strong>. Hivatalos m√©rk≈ëz√©seken mindig
            az aktu√°lis <strong>IFF Szab√°lyk√∂nyv</strong> az ir√°nyad√≥.
          </p>
          <p class="info-paragraph-top">
            A j√°t√©k seg√≠t a szab√°lyok gyakorl√°s√°ban, de
            <strong>nem helyettes√≠ti</strong> a hivatalos j√°t√©kvezet≈ëi
            k√©pz√©st vagy vizsg√°t.
          </p>
        </div>

        <!-- ADATKEZEL√âS ‚Äì R√ñVIDEN -->
        <div class="alert-box success">
          <h3>üõ°Ô∏è ADATKEZEL√âS ‚Äì R√ñVIDEN</h3>
          <p>
            Az egy√©ni eredm√©nyek kiz√°r√≥lag ezen az eszk√∂z√∂n, a b√∂ng√©sz≈ë
            <strong>localStorage</strong> ter√ºlet√©n t√°rol√≥dnak.
          </p>
          <p class="info-paragraph-top">
            A P√°rbaj szob√°k ideiglenes, v√©letlenszer≈± szobak√≥ddal j√∂nnek l√©tre
            a Firebase-ben. A j√°t√©k v√©g√©n a rendszer megpr√≥b√°lja automatikusan
            t√∂r√∂lni ezeket.
          </p>
        </div>

        <!-- J√ÅT√âKM√ìDOK -->
        <h3 class="info-highlight-title">J√ÅT√âKM√ìDOK</h3>

        <details open>
          <summary>üéÆ Egy√©ni gyakorl√°s</summary>
          <p class="info-paragraph-top">
            Klasszikus ‚Äûegy j√°t√©kos‚Äù m√≥d, ahol t√©mak√∂r√∂nk√©nt haladsz v√©gig a
            k√©rd√©seken.
          </p>
          <ul class="info-list">
            <li>Minden szinten <strong>3 √©lettel</strong> indulsz.</li>
            <li>Ha elfogy az √∂sszes √©let, v√©ge a k√∂rnek.</li>
            <li>
              L1 ‚Üí L2 ‚Üí L3 sorrend k√∂telez≈ë, magasabb szint csak az el≈ëz≈ë
              teljes√≠t√©se ut√°n ny√≠lik meg.
            </li>
            <li>
              A badge-ek (kis kup√°k) mutatj√°k, hogy melyik szint(ek)et vitted
              v√©gig.
            </li>
            <li>
              Ha mindh√°rom szint k√©sz minden t√©m√°ban, megkapod a ‚ÄûFloorball
              Mester‚Äù oklevelet.
            </li>
          </ul>
        </details>

        <details>
          <summary>‚öîÔ∏è P√°rbaj m√≥d (B√âTA)</summary>
          <p class="info-paragraph-top">
            Val√≥s idej≈±, k√∂r√∂kre osztott p√°rbaj vegyes k√©rd√©sekkel.
            <strong>Aki el≈ësz√∂r hib√°zik, kiesik.</strong>
          </p>
          <ul class="info-list">
            <li>Csak internetkapcsolattal m≈±k√∂dik (Firebase).</li>
            <li>Host hozza l√©tre a szob√°t, √©s linkkel h√≠vja meg az ellenfelet.</li>
            <li>
              Mindk√©t j√°t√©kos ugyanazt a k√©rd√©st l√°tja, azonos
              v√°laszlehet≈ës√©gekkel.
            </li>
            <li>
              V√°laszid≈ë: k√∂r√∂nk√©nt kb. 30 m√°sodperc. Id≈ët√∫ll√©p√©s = hib√°s v√°lasz.
            </li>
            <li>
              Ha mindketten hib√°tlanok maradnak a maxim√°lis k√∂rsz√°mig, a j√°t√©k
              d√∂ntetlen.
            </li>
            <li>
              Ha valaki kil√©p vagy elvesz√≠ti a kapcsolatot, a rendszer technikai
              d√∂ntetlennel z√°rhatja a p√°rbajt.
            </li>
          </ul>
        </details>

        <!-- ADATV√âDELEM & GDPR -->
        <h3 class="info-highlight-title">ADATV√âDELEM &amp; GDPR</h3>

        <details open>
          <summary>üìä Milyen adatot t√°rol az app?</summary>
          <ul class="info-list info-list-compact">
            <li>Nem k√©r nevet, e-mail c√≠met vagy k√ºl√∂n felhaszn√°l√≥i fi√≥kot.</li>
            <li>
              Helyben t√°rolt adatok: t√©mak√∂r√∂nk√©nti el≈ërehalad√°s, szintenk√©nti
              k√©rd√©ssz√°m, streak, t√©ma/szint be√°ll√≠t√°sok, v√°lasztott t√©ma
              (vil√°gos / s√∂t√©t m√≥d).
            </li>
            <li>
              Ezek b√°rmikor t√∂r√∂lhet≈ëk a jobb fels≈ë sarokban l√©v≈ë
              <strong>kuka ikonra</strong> kattintva.
            </li>
          </ul>
        </details>

        <details>
          <summary>‚òÅÔ∏è K√ºls≈ë szolg√°ltat√≥k (Umami, Firebase)</summary>
          <ul class="info-list info-list-compact">
            <li>
              Az oldal <strong>Umami</strong> analitik√°t haszn√°l anonim
              l√°togatotts√°gi statisztik√°khoz (pl. melyik k√©perny≈ët h√°nyszor
              nyitj√°k meg).
            </li>
            <li>
              A <strong>Firebase Realtime Database</strong> a P√°rbaj m√≥d
              szob√°it kezeli v√©letlenszer≈± szobak√≥d alapj√°n.
            </li>
            <li>
              Ezek a szolg√°ltat√≥k technikai okokb√≥l (pl. biztons√°g,
              hibakeres√©s) r√∂vid ideig napl√≥zhatj√°k az IP-c√≠met √©s
              b√∂ng√©sz≈ëadatokat, de a fejleszt≈ë ezeket egyedileg
              azonos√≠that√≥ form√°ban nem haszn√°lja fel.
            </li>
          </ul>
        </details>

        <details>
          <summary>üßπ Hogyan tudod t√∂r√∂lni az adataidat?</summary>
          <ul class="info-list info-list-compact">
            <li>
              Az appon bel√ºl: jobb fels≈ë sarok ‚Üí <strong>kuka ikon</strong> ‚Üí
              ‚ÄûIgen, t√∂rl√©s‚Äù.
            </li>
            <li>
              A b√∂ng√©sz≈ë be√°ll√≠t√°saiban k√ºl√∂n is t√∂r√∂lheted a webhely adatait /
              s√ºtijeit, ami minden helyi ment√©st
              (<code>localStorage</code>) megsz√ºntet.
            </li>
          </ul>
        </details>

        <button class="btn-main btn-main--secondary" onclick="app.toggleInfo()">
          BEZ√ÅR√ÅS
        </button>
      </div>
    </div>

    <!-- RESET MODAL -->
    <div id="reset-modal" class="modal-overlay">
      <div class="modal-box modal-box-center">
        <div class="modal-header">
          <h2 class="modal-title">T√∂rl√©s</h2>
          <button class="icon-btn modal-close" onclick="app.toggleResetModal()">‚úï</button>
        </div>

        <div class="alert-box warning">
          <h3>BIZTOSAN T√ñRL√ñD AZ ADATOKAT?</h3>
          <p>
            A j√°t√©k teljesen el√∂lr≈ël indul
            <strong>csak ezen az eszk√∂z√∂n / b√∂ng√©sz≈ëben</strong>.
          </p>
          <ul class="info-list">
            <li>T√∂rl≈ëdik minden eddigi v√°lasz, sz√°zal√©k, badge √©s a streak.</li>
            <li>Elt≈±nik a ‚ÄûFloorball Mester‚Äù oklev√©l, ha m√°r megszerezted.</li>
            <li>
              Vissza√°llnak az app-be√°ll√≠t√°sok (pl. vil√°gos / s√∂t√©t t√©ma,
              √ºdv√∂zl≈ë popup).
            </li>
          </ul>
          <p class="info-paragraph-top">
            A k√ºls≈ë szolg√°ltat√≥k (<strong>Umami, Firebase</strong>) √°ltal
            kezelt <em>technikai napl√≥kat</em> ez a gomb nem t√∂rli, de ezek nem
            tartalmaznak nevet vagy fi√≥khoz k√∂thet≈ë adatot.
          </p>
        </div>

        <button class="btn-main btn-main danger" onclick="app.fullReset()">
          IGEN, T√ñRL√âS
        </button>
        <button class="btn-main btn-main--secondary" onclick="app.toggleResetModal()">
          M√âGSE
        </button>
      </div>
    </div>

    <!-- HOST MODAL -->
    <div id="host-modal" class="modal-overlay">
      <div class="modal-box modal-box-center">
        <div class="modal-header">
          <h2 class="modal-title">P√°rbaj szoba l√©trehozva</h2>
          <button class="icon-btn modal-close" onclick="app.cancelHost()">‚úï</button>
        </div>
        <p>
          K√ºldd el az al√°bbi linket az ellenfelednek, hogy csatlakozhasson a
          p√°rbajhoz.
        </p>
        <input id="share-link-input"
               type="text"
               readonly
               class="share-link-input"
               onclick="this.select()" />
        <div class="modal-actions">
          <button class="btn-main" onclick="app.shareLink()">Link megoszt√°sa</button>
          <button class="btn-main btn-main--secondary" onclick="app.cancelHost()">
            M√©gse
          </button>
        </div>
      </div>
    </div>

    <!-- CHALLENGE MODAL (vend√©g) -->
    <div id="challenge-modal" class="modal-overlay">
      <div class="modal-box modal-box-center">
        <div class="modal-header">
          <h2 class="modal-title">P√°rbaj megh√≠v√°s</h2>
          <button class="icon-btn modal-close" onclick="app.rejectChallenge()">‚úï</button>
        </div>
        <p>Az ellenfeled p√°rbajra h√≠vott. Elfogadod a kih√≠v√°st?</p>
        <div class="modal-actions">
          <button class="btn-main" onclick="app.acceptChallenge()">Elfogadom</button>
          <button class="btn-main btn-main--secondary" onclick="app.rejectChallenge()">
            Elutas√≠tom
          </button>
        </div>
      </div>
    </div>

    <!-- WAITING MODAL (round ut√°n) -->
    <div id="waiting-modal" class="modal-overlay">
      <div class="modal-box modal-box-center">
        <div class="modal-header">
          <h2 class="modal-title">V√°rakoz√°s az ellenf√©lre</h2>
        </div>
        <p>V√°laszod r√∂gz√≠tve. V√°rjuk az ellenfeled v√°lasz√°t...</p>
        <div class="loader-spinner"></div>
        <p style="font-size:0.85rem; color:var(--text-muted);">
          Ha az ellenf√©l kil√©p vagy nem v√°laszol id≈ëben, a p√°rbaj technikai okb√≥l lez√°rul.
        </p>
      </div>
    </div>

    <!-- REMATCH MODAL ‚Äì OUTGOING -->
    <div id="rematch-outgoing-modal" class="modal-overlay">
      <div class="modal-box modal-box-center">
        <div class="modal-header">
          <h2 class="modal-title">√öj p√°rbaj k√©r√©se</h2>
          <button class="icon-btn modal-close" onclick="app.closeRematchOutgoing()">‚úï</button>
        </div>
        <p>√öj p√°rbajt k√©rt√©l az ellenfeledt≈ël. V√°rakoz√°s a v√°laszra...</p>
        <div class="modal-actions">
          <button class="btn-main btn-main--secondary" onclick="app.cancelRematchRequest()">
            M√©gse
          </button>
        </div>
      </div>
    </div>

    <!-- REMATCH MODAL ‚Äì INCOMING -->
    <div id="rematch-incoming-modal" class="modal-overlay">
      <div class="modal-box modal-box-center">
        <div class="modal-header">
          <h2 class="modal-title">√öj p√°rbaj ugyanazzal?</h2>
          <button class="icon-btn modal-close" onclick="app.declineRematch()">‚úï</button>
        </div>
        <p>Az ellenfeled √∫j p√°rbajt szeretne veled j√°tszani. Elfogadod?</p>
        <div class="modal-actions">
          <button class="btn-main" onclick="app.acceptRematch()">Elfogadom</button>
          <button class="btn-main btn-main--secondary" onclick="app.declineRematch()">
            Elutas√≠tom
          </button>
        </div>
      </div>
    </div>

    <!-- REMATCH INFO (pl. elutas√≠tva) -->
    <div id="rematch-info-modal" class="modal-overlay">
      <div class="modal-box modal-box-center">
        <div class="modal-header">
          <h2 class="modal-title">P√°rbaj v√©ge</h2>
          <button class="icon-btn modal-close" onclick="app.closeRematchInfo()">‚úï</button>
        </div>
        <p id="rematch-info-text">
          A m√°sik j√°t√©kos elutas√≠totta az √∫j p√°rbajt, menj vissza gyakorolni!
        </p>
        <div class="modal-actions">
          <button class="btn-main btn-main--secondary" onclick="app.closeRematchInfo()">
            Ok√©
          </button>
        </div>
      </div>
    </div>

    <!-- iOS INSTALL -->
    <div id="ios-install-modal" class="modal-overlay">
      <div class="modal-box modal-box-center">
        <div class="modal-header">
          <h2 class="modal-title">Telep√≠t√©s iOS-en</h2>
          <button class="icon-btn modal-close" onclick="app.closeIosInstall()">‚úï</button>
        </div>
        <p>
          iOS-en a Safari b√∂ng√©sz≈ëben nyisd meg az oldalt, majd a
          <strong>Megoszt√°s</strong> ikon ‚Üí
          <strong>Hozz√°ad√°s a F≈ëk√©perny≈ëh√∂z</strong>.
        </p>
      </div>
    </div>
  </div>
</body>
</html>



